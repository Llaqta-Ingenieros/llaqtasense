<page-header
  [title]="pageTitle"
  [subtitle]="pageSubtitle"
  [hasBack]="true"
  (backClick)="cancelar()">
</page-header>

<div class="m-t-24">
  <mat-card *ngIf="!isLoading">
    <mat-card-content>
      <form [formGroup]="minaForm" (ngSubmit)="guardarMina()">
        <div fxLayout="row wrap" fxLayoutGap="16px grid">
          <mat-form-field appearance="outline" fxFlex="100" fxFlex.gt-sm="50">
            <mat-label>{{ 'admin.minas.form.nombre' | translate }}</mat-label>
            <input matInput formControlName="nombre" required>
            <mat-error *ngIf="minaForm.get('nombre')?.hasError('required')">
              {{ 'common.validations.required' | translate }}
            </mat-error>
            <mat-error *ngIf="minaForm.get('nombre')?.hasError('minlength')">
              {{ 'common.validations.minlength' | translate: { min: 3 } }}
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" fxFlex="100" fxFlex.gt-sm="50">
            <mat-label>{{ 'admin.minas.form.ubicacion' | translate }}</mat-label>
            <input matInput formControlName="ubicacion" required>
            <mat-error *ngIf="minaForm.get('ubicacion')?.hasError('required')">
              {{ 'common.validations.required' | translate }}
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" fxFlex="100">
            <mat-label>{{ 'admin.minas.form.descripcion' | translate }}</mat-label>
            <textarea matInput formControlName="descripcion" rows="4"></textarea>
          </mat-form-field>
        </div>

        <div class="form-actions m-t-24" fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="8px">
          <button mat-stroked-button type="button" (click)="cancelar()" [disabled]="isLoading">
            {{ 'common.cancel' | translate }}
          </button>
          <button mat-raised-button color="primary" type="submit" [disabled]="isLoading || minaForm.invalid">
            <mat-icon *ngIf="!isLoading">save</mat-icon>
            <mat-progress-spinner *ngIf="isLoading" diameter="20" mode="indeterminate" class="m-r-8"></mat-progress-spinner>
            {{ (isEditMode ? 'common.save_changes' : 'common.create') | translate }}
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>

  <div *ngIf="isLoading" class="loading-shade full-page-spinner">
    <mat-progress-spinner diameter="50" mode="indeterminate"></mat-progress-spinner>
    <p>{{ 'common.loading_data' | translate }}</p>
  </div>
</div>
